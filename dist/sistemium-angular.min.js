"use strict";!function(e){e.module("sistemium.config",[]).value("sistemium.config",{debug:!0}),e.module("sistemium.directives",[]),e.module("sistemium.filters",[]),e.module("sistemium.services",[]),e.module("sistemium.models",[]),e.module("sistemium.dependencies",["toastr","ngTable","js-data","ui.router.stateHelper"]),e.module("sistemium",["sistemium.dependencies","sistemium.config","sistemium.directives","sistemium.filters","sistemium.services","sistemium.models"])}(angular),function(){angular.module("sistemium.models").config(function(e){angular.extend(e.defaults,{beforeInject:function(e,a){a.id||(a.id=uuid.v4())},beforeCreate:function(e,a,r){a.id||(a.id=uuid.v4()),r(null,a)}})}).config(function(e){angular.extend(e.defaults,{httpConfig:{headers:{"X-Return-Post":"true",authorization:window.localStorage.getItem("authorization"),"X-Page-Size":300}},queryTransform:function(e,a){var r={};return a.offset&&(r["x-start-page:"]=Math.ceil(a.offset/a.limit)),a.limit&&(r["x-page-size:"]=a.limit),delete a.limit,delete a.offset,angular.extend(r,a)}})})}(),function(){function e(e){angular.extend(e,{allowHtml:!0,timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!1,progressBar:!1,iconClasses:{error:"alert alert-danger",info:"alert alert-info",success:"alert alert-success",warning:"alert alert-warning"}})}angular.module("sistemium.dependencies").config(e)}(),function(){angular.module("sistemium.directives").directive("saTypeaheadClickOpen",function(e){return{require:"ngModel",link:function(a,r){var t=function(){var a=r.controller("ngModel"),t=a.$modelValue||"";t?(a.$setViewValue(""),e(function(){a.$setViewValue(t)})):a.$setViewValue(" ")};r.bind("click",t)}}})}(),function(){angular.module("sistemium.services").service("saErrors",function(){function e(e,a){var r=e&&e.data&&e.data.length>0&&e.data||[e];r.forEach(function(e){t.push({type:"danger",msg:e.message||e||n.unknown(a)})})}function a(a){e(a)}function r(){t.splice(0,t.length)}var t=[],n={unknown:function(e){switch(e||"en"){case"en":return"Unknown error";case"ru":return"Неизвестная ошибка"}}};return{addError:a,clear:r,errors:t,ru:{add:function(a){e(a,"ru")}}}})}(),function(){angular.module("sistemium.services").factory("saFormlyConfigService",function(){function e(e){if(n.hasOwnProperty(e))return n[e];throw new Error("No such key "+e+" in formlyConfig...")}function a(e,a){n[e]=a}function r(){return n}function t(e,a){return _.find(e,function(e){return e.key===a})}var n={};return{getConfigFieldsByKey:e,setConfig:a,getAll:r,getConfigKey:t}})}(),function(){angular.module("sistemium.services").factory("saHttpStatusService",function(){return{getStatusCodeText:function(e){var a="";switch(parseInt(e.toString(),10)){case 100:a="Continue";break;case 101:a="Switching Protocols";break;case 102:a="Processing (WebDAV; RFC 2518)";break;case 200:a="OK";break;case 201:a="Created";break;case 202:a="Accepted";break;case 203:a="Non-Authoritative Information (since HTTP/1.1)";break;case 204:a="No Content";break;case 205:a="Reset Content";break;case 206:a="Partial Content";break;case 207:a="Multi-Status (WebDAV; RFC 4918)";break;case 208:a="Already Reported (WebDAV; RFC 5842)";break;case 226:a="IM Used (RFC 3229)";break;case 300:a="Multiple Choices";break;case 301:a="Moved Permanently";break;case 302:a="Found";break;case 303:a="See Other";break;case 304:a="Not Modified";break;case 305:a="Use Proxy";break;case 306:a="Switch Proxy";break;case 307:a="Temporary Redirect";break;case 308:a="Permanent Redirect (Experimental RFC; RFC 7238)";break;case 400:a="Bad Request";break;case 401:a="Unauthorized";break;case 402:a="Payment Required";break;case 403:a="Forbidden";break;case 404:a="Not Found";break;case 405:a="Method Not Allowed";break;case 406:a="Not Acceptable";break;case 407:a="Proxy Authentication Required";break;case 408:a="Request Timeout";break;case 409:a="Conflict";break;case 410:a="Gone";break;case 411:a="Length Required";break;case 412:a="Precondition Failed";break;case 413:a="Request Entity Too Large";break;case 414:a="Request-URI Too Long";break;case 415:a="Unsupported Media Type";break;case 416:a="Requested Range Not Satisfiable";break;case 417:a="Expectation Failed";break;case 418:a="I'm a teapot (RFC 2324)";break;case 419:a="Authentication Timeout (not in RFC 2616)";break;case 420:a="Method Failure (Spring Framework) / Enhance Your Calm (Twitter)";break;case 422:a="Unprocessable Entity (WebDAV; RFC 4918)";break;case 423:a="Locked (WebDAV; RFC 4918)";break;case 424:a="Failed Dependency (WebDAV; RFC 4918)";break;case 426:a="Upgrade Required";break;case 428:a="Precondition Required (RFC 6585)";break;case 429:a="Too Many Requests (RFC 6585)";break;case 431:a="Request Header Fields Too Large (RFC 6585)";break;case 440:a="Login Timeout (Microsoft)";break;case 444:a="No Response (Nginx)";break;case 449:a="Retry With (Microsoft)";break;case 450:a="Blocked by Windows Parental Controls (Microsoft)";break;case 451:a="Unavailable For Legal Reasons (Internet draft) / Redirect (Microsoft)";break;case 494:a="Request Header Too Large (Nginx)";break;case 495:a="Cert Error (Nginx)";break;case 496:a="No Cert (Nginx)";break;case 497:a="HTTP to HTTPS (Nginx)";break;case 498:a="Token expired/invalid (Esri)";break;case 499:a="Client Closed Request (Nginx) / Token required (Esri)";break;case 500:a="Internal Server Error";break;case 501:a="Not Implemented";break;case 502:a="Bad Gateway";break;case 503:a="Service Unavailable";break;case 504:a="Gateway Timeout";break;case 505:a="HTTP Version Not Supported";break;case 506:a="Variant Also Negotiates (RFC 2295)";break;case 507:a="Insufficient Storage (WebDAV; RFC 4918)";break;case 508:a="Loop Detected (WebDAV; RFC 5842)";break;case 509:a="Bandwidth Limit Exceeded (Apache bw/limited extension)";break;case 510:a="Not Extended (RFC 2774)";break;case 511:a="Network Authentication Required (RFC 6585)";break;case 520:a="Origin Error (Cloudflare)";break;case 521:a="Web server is down (Cloudflare)";break;case 522:a="Connection timed out (Cloudflare)";break;case 523:a="Proxy Declined Request (Cloudflare)";break;case 524:a="A timeout occurred (Cloudflare)";break;case 598:a="Network read timeout error (Unknown)";break;case 599:a="Network connect timeout error (Unknown)";break;default:a="Unknown HTTP status '"+e+"', what is this?"}return a}}})}(),function(){angular.module("sistemium.services").factory("saMessageService",function(e){function a(a,r,t,n,i){r=r||"",t=t||{},e[i](a,r,_.assign(n,t))}var r={};return r.success=function(e,r,t){var n={timeOut:2e3};a(e,r,t,n,"success")},r.info=function(e,r,t){var n={timeout:3e3};a(e,r,t,n,"info")},r.warning=function(e,r,t){var n={timeout:3e3};a(e,r,t,n,"warning")},r.error=function(e,r,t){var n={timeout:4e3};a(e,r,t,n,"error")},r})}(),function(){angular.module("sistemium.services").service("saNgTable",function(e){function a(e){var a={"x-page-size:":e&&e.count()||12,"x-start-page:":e&&e.page()||1};if(e&&e.sorting()){var r=_.reduce(e.sorting(),function(e,a,r){return e+","+("desc"===a?"-":"")+r},"").substr(1);r&&(a["x-order-by:"]=r)}return a}function r(e,r){return function(s,o){var c,u,l=a(o),d=!i||_.get(l,"searchFor:")!==_.get(t,"searchFor:");d&&(c=r.getCount(_.pick(l,["searchFor:","searchFields:"])).then(function(a){return e.ngTableParams.total(i=a),a<(o.page()-1)*o.count()&&(l["x-start-page:"]=1,u=1),l}),c.catch(function(){s.reject()}));var f=function(){var a=l;return _.matches(a)(e.lastFindAllParams)&&_.matches(e.lastFindAllParams)(a)?(u&&o.page(u),s.resolve(n),void 0):r.findAll(a,{bypassCache:!0}).then(function(e){u&&o.page(u),t=a,n=e,s.resolve(n)},function(){s.reject()})};e.busy=c?c.then(f):f(l)}}var t={},n=[],i=0;return{setup:function(a,t){var i=!a.ngTable.noPages&&(a.ngTable.counts||[12,25,50,100]),s=a.ngTable.count||12;return i.indexOf(s)<0&&(i.push(s),i=_.sortBy(i)),a.ngTableParams=new e(angular.extend({page:1,count:s,clearData:function(){n=[]}},a.ngTable),{filterDelay:0,dataset:n,counts:i,getData:r(a,t)}),a.ngTableParams},ngTableToV4Params:a}})}(),angular.module("sistemium.services").service("saSchema",function(e){var a={},r=function(e){return{sumFn:function(a){return _.reduce(a,function(a,r){return a+r[e]()},0)},sum:function(a){return _.reduce(a,function(a,r){return a+r[e]},0)},custom:function(a,r,t){return _.reduce(a,function(a,t){return r(a,t[e]())},t)}}},t=function(e,a){return function(t,n){var i={};return _.each(e,function(e){i[e]=function(){return r(e)[a](t[n])}}),i}},n={register:function(r){var n=a[r.name]=e.defineResource(r);return r.methods&&(n.agg=t(Object.keys(r.methods),"sumFn")),n},models:function(){return a},model:function(e){return a[e]},aggregate:r};return n});