"use strict";!function(e){e.module("sistemium.config",[]).value("sistemium.config",{debug:!0}),e.module("sistemium.directives",[]),e.module("sistemium.filters",[]),e.module("sistemium.services",[]),e.module("sistemium.models",[]),e.module("sistemium.dependencies",["ui.bootstrap","toastr","ngTable","js-data"]),e.module("sistemium",["sistemium.dependencies","sistemium.config","sistemium.directives","sistemium.filters","sistemium.services","sistemium.models"])}(angular),function(){function e(e){angular.extend(e,{allowHtml:!0,timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!1,progressBar:!1,iconClasses:{error:"alert alert-danger",info:"alert alert-info",success:"alert alert-success",warning:"alert alert-warning"}})}angular.module("sistemium.dependencies").config(e)}(),function(){angular.module("sistemium.directives").directive("saErrorWidget",function(){return{restrict:"AC",template:'<div ng-show="dm.errors.length"><uib-alert ng-repeat="error in dm.errors" type="{{error.type}}" close="dm.closeError($index)">{{error.msg}}</uib-alert></div>',controllerAs:"dm",controller:function(e){var r=this;r.errors=e.errors,r.closeError=function(e){r.errors.splice(e,1)}}}})}(),function(){angular.module("sistemium").directive("saInputWithAddon",function(){return{restrict:"AC",template:'<div class="input-group"><div class="input-group-btn" uib-dropdown is-open="vm.isOpen"><button class="button btn btn-default" type="button" uib-dropdown-toggle>{{saSelectModel[saLabelProp]}} <span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="item in saSelectOptions"><a href="" ng-click="vm.setActiveItem(item)">{{item[saLabelProp]}}</a></li></ul><input class="form-control" ng-model="saInputModel" type="number" ng-required="required"/>',replace:!0,scope:{saSelectModel:"=",saInputModel:"=",saLabelProp:"@",saValueProp:"@",saSelectOptions:"=",required:"@"},controller:function(e){var r=this;r.setActiveItem=function(r){e.saSelectModel=r}},controllerAs:"vm"}})}(),function(){angular.module("sistemium").directive("saTypeaheadClickOpen",function(e){return{require:"ngModel",link:function(r,t){var a=function(){var r=t.controller("ngModel"),a=r.$modelValue||"";a?(r.$setViewValue(""),e(function(){r.$setViewValue(a)})):r.$setViewValue(" ")};t.bind("click",a)}}})}(),function(){angular.module("sistemium.models").config(function(e){angular.extend(e.defaults,{beforeInject:function(e,r){r.id||(r.id=uuid.v4())},beforeCreate:function(e,r,t){r.id||(r.id=uuid.v4()),t(null,r)}})}).config(function(e){angular.extend(e.defaults,{httpConfig:{headers:{"X-Return-Post":"true",authorization:window.localStorage.getItem("authorization"),"X-Page-Size":300}},queryTransform:function(e,r){var t={};return r.offset&&(t["x-start-page:"]=Math.ceil(r.offset/r.limit)),r.limit&&(t["x-page-size:"]=r.limit),delete r.limit,delete r.offset,angular.extend(t,r)}})})}(),function(){angular.module("sistemium.services").service("saErrors",function(){function e(e,r){var t=e&&e.data&&e.data.length>0&&e.data||[e];t.forEach(function(e){a.push({type:"danger",msg:e.message||e||n.unknown(r)})})}function r(r){e(r)}function t(){a.splice(0,a.length)}var a=[],n={unknown:function(e){switch(e||"en"){case"en":return"Unknown error";case"ru":return"Неизвестная ошибка"}}};return{addError:r,clear:t,errors:a,ru:{add:function(r){e(r,"ru")}}}})}(),function(){angular.module("sistemium.services").factory("saFormlyConfigService",function(){function e(e){if(n.hasOwnProperty(e))return n[e];throw new Error("No such key "+e+" in formlyConfig...")}function r(e,r){n[e]=r}function t(){return n}function a(e,r){return _.find(e,function(e){return e.key===r})}var n={};return{getConfigFieldsByKey:e,setConfig:r,getAll:t,getConfigKey:a}})}(),function(){angular.module("sistemium.services").factory("saHttpStatusService",function(){return{getStatusCodeText:function(e){var r="";switch(parseInt(e.toString(),10)){case 100:r="Continue";break;case 101:r="Switching Protocols";break;case 102:r="Processing (WebDAV; RFC 2518)";break;case 200:r="OK";break;case 201:r="Created";break;case 202:r="Accepted";break;case 203:r="Non-Authoritative Information (since HTTP/1.1)";break;case 204:r="No Content";break;case 205:r="Reset Content";break;case 206:r="Partial Content";break;case 207:r="Multi-Status (WebDAV; RFC 4918)";break;case 208:r="Already Reported (WebDAV; RFC 5842)";break;case 226:r="IM Used (RFC 3229)";break;case 300:r="Multiple Choices";break;case 301:r="Moved Permanently";break;case 302:r="Found";break;case 303:r="See Other";break;case 304:r="Not Modified";break;case 305:r="Use Proxy";break;case 306:r="Switch Proxy";break;case 307:r="Temporary Redirect";break;case 308:r="Permanent Redirect (Experimental RFC; RFC 7238)";break;case 400:r="Bad Request";break;case 401:r="Unauthorized";break;case 402:r="Payment Required";break;case 403:r="Forbidden";break;case 404:r="Not Found";break;case 405:r="Method Not Allowed";break;case 406:r="Not Acceptable";break;case 407:r="Proxy Authentication Required";break;case 408:r="Request Timeout";break;case 409:r="Conflict";break;case 410:r="Gone";break;case 411:r="Length Required";break;case 412:r="Precondition Failed";break;case 413:r="Request Entity Too Large";break;case 414:r="Request-URI Too Long";break;case 415:r="Unsupported Media Type";break;case 416:r="Requested Range Not Satisfiable";break;case 417:r="Expectation Failed";break;case 418:r="I'm a teapot (RFC 2324)";break;case 419:r="Authentication Timeout (not in RFC 2616)";break;case 420:r="Method Failure (Spring Framework) / Enhance Your Calm (Twitter)";break;case 422:r="Unprocessable Entity (WebDAV; RFC 4918)";break;case 423:r="Locked (WebDAV; RFC 4918)";break;case 424:r="Failed Dependency (WebDAV; RFC 4918)";break;case 426:r="Upgrade Required";break;case 428:r="Precondition Required (RFC 6585)";break;case 429:r="Too Many Requests (RFC 6585)";break;case 431:r="Request Header Fields Too Large (RFC 6585)";break;case 440:r="Login Timeout (Microsoft)";break;case 444:r="No Response (Nginx)";break;case 449:r="Retry With (Microsoft)";break;case 450:r="Blocked by Windows Parental Controls (Microsoft)";break;case 451:r="Unavailable For Legal Reasons (Internet draft) / Redirect (Microsoft)";break;case 494:r="Request Header Too Large (Nginx)";break;case 495:r="Cert Error (Nginx)";break;case 496:r="No Cert (Nginx)";break;case 497:r="HTTP to HTTPS (Nginx)";break;case 498:r="Token expired/invalid (Esri)";break;case 499:r="Client Closed Request (Nginx) / Token required (Esri)";break;case 500:r="Internal Server Error";break;case 501:r="Not Implemented";break;case 502:r="Bad Gateway";break;case 503:r="Service Unavailable";break;case 504:r="Gateway Timeout";break;case 505:r="HTTP Version Not Supported";break;case 506:r="Variant Also Negotiates (RFC 2295)";break;case 507:r="Insufficient Storage (WebDAV; RFC 4918)";break;case 508:r="Loop Detected (WebDAV; RFC 5842)";break;case 509:r="Bandwidth Limit Exceeded (Apache bw/limited extension)";break;case 510:r="Not Extended (RFC 2774)";break;case 511:r="Network Authentication Required (RFC 6585)";break;case 520:r="Origin Error (Cloudflare)";break;case 521:r="Web server is down (Cloudflare)";break;case 522:r="Connection timed out (Cloudflare)";break;case 523:r="Proxy Declined Request (Cloudflare)";break;case 524:r="A timeout occurred (Cloudflare)";break;case 598:r="Network read timeout error (Unknown)";break;case 599:r="Network connect timeout error (Unknown)";break;default:r="Unknown HTTP status '"+e+"', what is this?"}return r}}})}(),function(){angular.module("sistemium.services").factory("saMessageService",function(e){function r(r,t,a,n,i){t=t||"",a=a||{},e[i](r,t,_.assign(n,a))}var t={};return t.success=function(e,t,a){var n={timeOut:2e3};r(e,t,a,n,"success")},t.info=function(e,t,a){var n={timeout:3e3};r(e,t,a,n,"info")},t.warning=function(e,t,a){var n={timeout:3e3};r(e,t,a,n,"warning")},t.error=function(e,t,a){var n={timeout:4e3};r(e,t,a,n,"error")},t})}(),function(){angular.module("sistemium.services").service("saNgTable",function(e){function r(e){var r={"x-page-size:":e&&e.count()||12,"x-start-page:":e&&e.page()||1};if(e&&e.sorting()){var t=_.reduce(e.sorting(),function(e,r,t){return e+","+("desc"===r?"-":"")+t},"").substr(1);t&&(r["x-order-by:"]=t)}return r}function t(e,t){return function(s,o){var c,u,l=r(o),d=!i||_.get(l,"searchFor:")!==_.get(a,"searchFor:");d&&(c=t.getCount(_.pick(l,["searchFor:","searchFields:"])).then(function(r){return e.ngTableParams.total(i=r),r<(o.page()-1)*o.count()&&(l["x-start-page:"]=1,u=1),l}),c.catch(function(){s.reject()}));var m=function(){var r=l;return _.matches(r)(e.lastFindAllParams)&&_.matches(e.lastFindAllParams)(r)?(u&&o.page(u),s.resolve(n),void 0):t.findAll(r,{bypassCache:!0}).then(function(e){u&&o.page(u),a=r,n=e,s.resolve(n)},function(){s.reject()})};e.busy=c?c.then(m):m(l)}}var a={},n=[],i=0;return{setup:function(r,a){var i=!r.ngTable.noPages&&(r.ngTable.counts||[12,25,50,100]),s=r.ngTable.count||12;return i.indexOf(s)<0&&(i.push(s),i=_.sortBy(i)),r.ngTableParams=new e(angular.extend({page:1,count:s,clearData:function(){n=[]}},r.ngTable),{filterDelay:0,dataset:n,counts:i,getData:t(r,a)}),r.ngTableParams},ngTableToV4Params:r}})}(),angular.module("sistemium.services").service("saSchema",function(e){var r={},t=function(e){return{sumFn:function(r){return _.reduce(r,function(r,t){return r+t[e]()},0)},sum:function(r){return _.reduce(r,function(r,t){return r+t[e]},0)},custom:function(r,t,a){return _.reduce(r,function(r,a){return t(r,a[e]())},a)}}},a=function(e,r){return function(a,n){var i={};return _.each(e,function(e){i[e]=function(){return t(e)[r](a[n])}}),i}},n={register:function(t){var n=r[t.name]=e.defineResource(t);return t.methods&&(n.agg=a(Object.keys(t.methods),"sumFn")),n},models:function(){return r},model:function(e){return r[e]},aggregate:t};return n});